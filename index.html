<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Chatbot Sederhana ¬∑ HTML</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: linear-gradient(145deg, #e0e5ec 0%, #f0f4fa 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .chatbot-card {
            max-width: 700px;
            width: 100%;
            background-color: #ffffff;
            border-radius: 2rem 2rem 1.8rem 1.8rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 85vh;
            max-height: 800px;
            transition: all 0.2s ease;
        }

        /* header */
        .chat-header {
            background: #1e2b3c;
            color: white;
            padding: 1.2rem 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            border-bottom: 2px solid #2d3f54;
        }

        .bot-avatar {
            background: #2f8d6b;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0,60,40,0.3);
        }

        .header-text {
            flex: 1;
        }

        .header-text h3 {
            font-weight: 600;
            font-size: 1.3rem;
            letter-spacing: -0.2px;
        }

        .header-text p {
            font-size: 0.75rem;
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #22c55e;
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* area chat */
        .chat-window {
            flex: 1;
            padding: 1.5rem 1.2rem;
            overflow-y: auto;
            background: #f8fafd;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            scroll-behavior: smooth;
        }

        /* message bubbles */
        .message {
            display: flex;
            align-items: flex-end;
            max-width: 85%;
            animation: slideIn 0.25s ease;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.bot {
            align-self: flex-start;
        }

        .bubble {
            padding: 0.8rem 1.2rem;
            border-radius: 1.5rem;
            font-size: 0.95rem;
            line-height: 1.45;
            word-wrap: break-word;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .user .bubble {
            background: #1e2b3c;
            color: white;
            border-bottom-right-radius: 0.2rem;
            margin-left: 0.5rem;
        }

        .bot .bubble {
            background: #ffffff;
            color: #1a1e24;
            border-bottom-left-radius: 0.2rem;
            border: 1px solid #e9ecf0;
            margin-right: 0.5rem;
        }

        /* avatar kecil di samping bot */
        .bot-avatar-small {
            width: 32px;
            height: 32px;
            background: #2f8d6b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
            margin-right: 6px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        /* area input */
        .input-area {
            background: white;
            border-top: 1px solid #dce3ec;
            padding: 1rem 1.2rem 1.2rem;
            display: flex;
            gap: 0.6rem;
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            background: #f1f5f9;
            border-radius: 2rem;
            padding: 0.3rem 0.3rem 0.3rem 1.2rem;
            display: flex;
            align-items: center;
            border: 1px solid #dbe0e8;
            transition: border 0.15s;
        }

        .input-wrapper:focus-within {
            border-color: #2f8d6b;
            box-shadow: 0 0 0 3px rgba(47, 141, 107, 0.15);
        }

        #userInput {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            padding: 0.7rem 0;
            font-size: 0.95rem;
            resize: none;
            max-height: 100px;
            min-height: 24px;
            line-height: 1.4;
            font-family: inherit;
        }

        #userInput::placeholder {
            color: #8e9aab;
            font-style: italic;
        }

        #sendBtn {
            background: #1e2b3c;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            color: white;
            font-size: 1.3rem;
            margin-left: 4px;
            flex-shrink: 0;
        }

        #sendBtn:hover {
            background: #2f8d6b;
        }

        #sendBtn:active {
            transform: scale(0.95);
        }

        /* pesan sederhana */
        .timestamp {
            font-size: 0.6rem;
            opacity: 0.6;
            margin-top: 4px;
            text-align: right;
        }

        .bot .timestamp {
            text-align: left;
        }

        /* animasi muncul */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* scrollbar kustom */
        .chat-window::-webkit-scrollbar {
            width: 5px;
        }
        .chat-window::-webkit-scrollbar-track {
            background: #eef2f6;
        }
        .chat-window::-webkit-scrollbar-thumb {
            background: #b7c2d1;
            border-radius: 10px;
        }

        /* responsif */
        @media (max-width: 480px) {
            .chatbot-card {
                height: 95vh;
                border-radius: 1.5rem 1.5rem 1.2rem 1.2rem;
            }
            .message {
                max-width: 90%;
            }
        }

        /* efek tambahan */
        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        .chip {
            background: #eef2f6;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 0.8rem;
            border: 1px solid #cdd9e9;
            cursor: pointer;
            transition: background 0.1s;
            color: #1e2b3c;
        }
        .chip:hover {
            background: #d5e0eb;
        }
    </style>
</head>
<body>

<div class="chatbot-card">
    <!-- header -->
    <div class="chat-header">
        <div class="bot-avatar">ü§ñ</div>
        <div class="header-text">
            <h3>Asisten Cerdas</h3>
            <p><span class="status-dot"></span> Online ¬∑ siap membantu</p>
        </div>
    </div>

    <!-- window chat -->
    <div class="chat-window" id="chatWindow">
        <!-- pesan sambutan awal akan diisi javascript -->
    </div>

    <!-- area input & chips -->
    <div class="input-area">
        <div class="input-wrapper">
            <textarea id="userInput" placeholder="Ketik pesan..." rows="1"></textarea>
            <button id="sendBtn">‚û§</button>
        </div>
    </div>
    <!-- optional chip saran (inline) -->
    <div style="padding: 0 1.2rem 1rem 1.2rem; background: white; border-top: none;">
        <div class="suggestion-chips">
            <span class="chip" data-quick="Halo">üëã Halo</span>
            <span class="chip" data-quick="Siapa namamu?">ü§î Siapa kamu?</span>
            <span class="chip" data-quick="Apa kabar?">üòä Apa kabar?</span>
            <span class="chip" data-quick="Makasih">üôè Makasih</span>
        </div>
    </div>
</div>

<script>
    (function() {
        // elemen DOM
        const chatWindow = document.getElementById('chatWindow');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const chips = document.querySelectorAll('.chip');

        // helper: scroll ke bawah
        function scrollToBottom() {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // helper: buat elemen pesan
        function createMessageBubble(sender, text, isHtml = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);

            // avatar kecil hanya untuk bot
            if (sender === 'bot') {
                const avatar = document.createElement('div');
                avatar.classList.add('bot-avatar-small');
                avatar.textContent = 'ü§ñ';
                messageDiv.appendChild(avatar);
            }

            const bubbleDiv = document.createElement('div');
            bubbleDiv.classList.add('bubble');
            
            if (isHtml) {
                bubbleDiv.innerHTML = text; // hati-hati, hanya digunakan untuk teks aman (tanpa tag berbahaya)
            } else {
                bubbleDiv.textContent = text;
            }

            // tambah timestamp sederhana
            const timeSpan = document.createElement('div');
            timeSpan.classList.add('timestamp');
            const now = new Date();
            const jam = now.getHours().toString().padStart(2,'0');
            const menit = now.getMinutes().toString().padStart(2,'0');
            timeSpan.textContent = `${jam}:${menit}`;

            bubbleDiv.appendChild(timeSpan);
            messageDiv.appendChild(bubbleDiv);
            return messageDiv;
        }

        // menambahkan pesan ke chat
        function addMessage(sender, text, isHtml = false) {
            const msg = createMessageBubble(sender, text, isHtml);
            chatWindow.appendChild(msg);
            scrollToBottom();
        }

        // RESPON BOT (logika sederhana keyword)
        function getBotReply(userMessage) {
            const msg = userMessage.trim().toLowerCase();

            // sapaan
            if (msg.match(/\b(halo|hai|hey|siang|pagi|sore|helo|hi)\b/)) {
                return "Halo juga! üëã Ada yang bisa saya bantu?";
            }
            // kabar
            if (msg.match(/\b(apa kabar|gimana kabar|kabar baik)\b/)) {
                return "Kabar saya baik, Alhamdulillah. Kalau Anda? Semoga sehat selalu!";
            }
            // siapa nama
            if (msg.match(/\b(nama kamu siapa|siapa nama|namamu|siapa kamu|kamu siapa)\b/)) {
                return "Saya asisten virtual sederhana, lahir dari HTML dan JavaScript. Teman ngobrol kamu üòÑ";
            }
            // terima kasih
            if (msg.match(/\b(makasih|terima kasih|thanks|thank you|thanks ya)\b/)) {
                return "Sama-sama! Senang bisa membantu üòä";
            }
            // umur / usia
            if (msg.match(/\b(umur|usia|berapa umur|usia kamu)\b/)) {
                return "Saya baru dibuat hari ini, jadi masih balita digital üòÑ";
            }
            // kemampuan
            if (msg.match(/\b(bisa apa|kamu bisa apa|fitur)\b/)) {
                return "Saya bisa merespon sapaan, menanyakan kabar, dan memberi saran sederhana. Coba ketik 'halo' atau 'makasih'!";
            }
            // makanan favorit (random lucu)
            if (msg.match(/\b(makanan|minuman|suka makan)\b/)) {
                return "Saya doyan informasi dan byte, tapi kalau ditanya makanan favorit, saya pilih 'nasi goreng' üçö";
            }
            // panggil bot
            if (msg.match(/\b(bot|robot|asisten)\b/)) {
                return "Ya, saya bot yang ramah ü§ñ‚ú®";
            }
            // jika panjang / mungkin curhat
            if (msg.includes("bantu") || msg.includes("tolong")) {
                return "Tentu, saya akan coba membantu. Ceritakan lebih detail ya.";
            }

            // default (kata tidak dikenal)
            const defaultReplies = [
                "Maaf, saya belum paham maksudnya. Bisa diulang dengan kata lain?",
                "Hmm, saya masih belajar. Coba tanyakan yang lain üòä",
                "Bisa diperjelas? Saya asisten sederhana, coba sapaan atau 'halo'.",
                "Saya belum mengerti. Coba kata kunci seperti 'nama' atau 'kabar'."
            ];
            return defaultReplies[Math.floor(Math.random() * defaultReplies.length)];
        }

        // fungsi saat user kirim pesan
        function handleUserMessage() {
            const rawText = userInput.value.trim();
            if (rawText === '') return;

            // tampilkan pesan user
            addMessage('user', rawText);

            // kosongkan input & reset tinggi
            userInput.value = '';
            userInput.style.height = 'auto';

            // proses balasan bot setelah jeda (simulasi mikir)
            setTimeout(() => {
                const botReply = getBotReply(rawText);
                addMessage('bot', botReply);
            }, 400);
        }

        // event send button
        sendBtn.addEventListener('click', handleUserMessage);

        // event enter (shift+enter untuk newline, enter saja kirim)
        userInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault(); // cegah newline
                handleUserMessage();
            }
        });

        // auto-resize textarea (tinggi dinamis)
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            // batasi maks 120px
            if (this.scrollHeight > 120) {
                this.style.height = '120px';
                this.style.overflowY = 'auto';
            } else {
                this.style.overflowY = 'hidden';
            }
        });

        // chip / saran cepat
        chips.forEach(chip => {
            chip.addEventListener('click', function() {
                const quickText = this.getAttribute('data-quick') || this.innerText;
                userInput.value = quickText;
                // trigger input untuk resize
                userInput.dispatchEvent(new Event('input', { bubbles: true }));
                userInput.focus();
                // otomatis kirim? bisa juga langsung handle, tapi kita biarkan user kirim manual atau langsung?
                // lebih natural: langsung kirim setelah klik chip
                handleUserMessage();
            });
        });

        // sambutan bot saat load (tanpa delay)
        window.addEventListener('load', () => {
            // memberi kesan bot menyapa
            setTimeout(() => {
                addMessage('bot', 'Halo! Saya asisten virtual. Silakan tanya sesuatu atau pilih saran di bawah. üëá');
            }, 200);
        });

        // fokus input
        userInput.focus();

        // ekstra: handle klik di luar (tetap)
    })();
</script>

<!-- catatan: desain sederhana, tidak ada API key, respon statis cocok untuk demo -->
</body>
</html>